# Admin

### 배경

파리에서 포토그래퍼로 활동하고 있는 친구를 위해 만든 홈페이지다. 페이지 UI는 마음에 들어서 바꿀 일이 없지만, 페이지 내 사진은 매번 업데이트가 되어야한다.

내게 사진을 바꾸는 작업은 간단하다. 파일을 친구로부터 받으면 사진 사이즈를 변환한다. 왜냐하면 원본 사진 하나당 20~30mb를 차지하기 때문에, 이미지 로딩이 오래걸리기 때문이다. 그렇기에 나는 sharp.js와 webp 라이브러리를 사용하여 사진의 품질은 거의 유지한체로 파일 용량을 1mb 이하로 변환시킨다. 그 다음으로는 Cloudflare의 R2 스토리지에서 사진을 업데이트하고, images_dir.ts에서 보여주고 싶은 순서만 정렬하면 된다. 파일 이름은 "사람이름, 촬영연도"이고, 동일한 이름, 동일한 촬영연도의 사진인 경우 파일명이 (N)을 넣어 구분한다. 다만 파일명으로 caption을 달아두는데, 이때는 (N)을 제거한다. 물론 이건 프론트단에서 구현되어있다.

### Admin 계정의 필요성

지금 나는 친구에게 도움을 줄 수 있는 Admin 페이지를 만들고자 한다. 생각해봐라 매번 나에게 사진 순서 변경을 요청한다면, 마음이 편할까? 매번 나의 손을 거쳐서 수정하는게 그 친구에게는 내게 부탁하는 어려운 일이다. 그의 부담을 덜고싶다.

### 무엇을 어떻게 만들어야할까?

모든 조건은 Static page이다. Serverless로 Cloudflare의 Page 위에 동작해야한다.

그렇지만 구글 인증은 필수다. **Firebase Authentication**을 사용하여 Google 로그인·세션·허용 계정 관리를 한다. Firebase Auth는 무료이며, 단일 사용자(친구 한 명) 수준에 적합하다.

admin의 목적은 나를 거치지 않고 친구가 손쉽게 사진을 올리고, 삭제하고 순서를 변경하고 할 수 있는 것이다.
다만 편의성에 신경써야한다. 예로들어 여러 개의 사진을 한 번에 등록, 삭제 할 수 있다던가, 파일 업로드가 drag & drop이 된다던가, 사진 이동이 drag & drop이 된다던가 하는 것이다. 분명 이 외에도 친구가 사진의 업로드를 변경하는데 있어서 필요한 기능을 함께 고민했으면 좋겠다.

admin은 모바일 사용성도 고민해야한다. 그리고 배경에서 언급했듯 이미지 최적화를 거쳐서 파일이 업로드 되어야한다.

전반적인 디자인은 shadcn 지침을 벗어나지 않도록하자.
